import{j as e,r as l,b as G,I as A,B as O,e as we,u as Se,g as Ce,l as X,a as Z,n as ke,c as F}from"./index-D0kGtGIa.js";import{c as Pe,P as Ie,T as Ke,M as U,v as se}from"./Modal-BUDUBpVK.js";import{E as De,d as Ae}from"./departmentsService-CqHIOhxl.js";import{S as L}from"./Select-BeY_WEo1.js";import{a as le,l as ne,s as ae,c as Ve,b as Ee,d as Te}from"./faceRecognition-DmqH_ObE.js";import{p as He}from"./positionsService-LlSgPJBz.js";const Me=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Oe=Pe("user",Me);function Le({data:g,totalCount:u,page:s,pageSize:a,pageCount:i,onDelete:o,onEdit:x,onRegisterFace:C,onViewPayroll:j,onViewDetail:c,onViewAttendance:p,onPageChange:h}){const w=g.filter(n=>n.visible),S=u===0?0:(s-1)*a+1,b=u===0?0:Math.min(s*a,u),d=(()=>{if(i<=5)return Array.from({length:i},(f,H)=>H+1);const n=[1];let y=Math.max(2,s-1),v=Math.min(i-1,s+1);y>2&&n.push("dots-start");for(let f=y;f<=v;f+=1)n.push(f);return v<i-1&&n.push("dots-end"),n.push(i),n})(),m=n=>{if(n.photo)return e.jsx("img",{src:n.photo,alt:n.name,className:"h-11 w-11 rounded-full object-cover"});const y=n.name.split(" ").slice(-2).map(v=>v.charAt(0)).join("").toUpperCase();return e.jsx("div",{className:"flex h-11 w-11 items-center justify-center rounded-full bg-slate-100 text-sm font-semibold text-slate-500",children:y})};return e.jsxs("div",{className:"overflow-hidden rounded-[24px] border border-slate-100 shadow-[0_18px_45px_rgba(15,23,42,0.08)]",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-slate-100 text-left",children:[e.jsx("thead",{className:"bg-slate-50 text-xs font-semibold uppercase tracking-wide text-slate-500",children:e.jsx("tr",{children:["MÃ£ NV","Há» vÃ  tÃªn","PhÃ²ng ban","Chá»©c vá»¥","LÆ°Æ¡ng","Tráº¡ng thÃ¡i","HÃ nh Ä‘á»™ng"].map(n=>e.jsx("th",{className:"px-6 py-4",children:n},n))})}),e.jsxs("tbody",{className:"bg-white text-sm text-slate-600",children:[w.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-400",children:"KhÃ´ng cÃ³ nhÃ¢n viÃªn phÃ¹ há»£p vá»›i bá»™ lá»c"})}),w.map(n=>e.jsxs("tr",{className:"border-b border-slate-100 last:border-b-0 hover:bg-slate-50/60",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-700",children:n.code})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[m(n),e.jsx("p",{className:"font-semibold text-slate-900",children:n.name})]})}),e.jsx("td",{className:"px-6 py-4 text-slate-700",children:n.dept}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"rounded-full bg-slate-100 px-3 py-1 text-xs font-semibold text-slate-600",children:n.position})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("button",{type:"button",onClick:()=>j&&j(n),className:"inline-flex items-center gap-2 rounded-full bg-blue-50 px-4 py-1.5 text-xs font-semibold text-blue-600 shadow-sm transition hover:bg-blue-100",children:"ðŸ’° Xem lÆ°Æ¡ng"}),e.jsx("button",{type:"button",onClick:()=>p&&p(n),className:"inline-flex items-center gap-2 rounded-full bg-violet-50 px-4 py-1.5 text-xs font-semibold text-violet-600 shadow-sm transition hover:bg-violet-100",children:"ðŸ•’ Lá»‹ch sá»­ cÃ´ng"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-4 py-1 text-xs font-semibold ${n.status==="active"?"bg-green-50 text-green-600":"bg-slate-100 text-slate-500"}`,children:[e.jsx("span",{className:"h-2 w-2 rounded-full bg-current"}),n.status==="active"?"Hoáº¡t Ä‘á»™ng":"NgÆ°ng"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{title:"Sá»­a",onClick:()=>x&&x(n),className:"rounded-full border border-blue-100 bg-blue-50 p-2 text-blue-600 shadow-sm transition hover:bg-blue-100",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{title:"Xem chi tiáº¿t",onClick:()=>c&&c(n),className:"rounded-full border border-slate-200 bg-white p-2 text-slate-600 shadow-sm transition hover:bg-slate-50",children:e.jsx(De,{className:"h-4 w-4"})}),e.jsx("button",{title:"XoÃ¡",onClick:()=>o(n.id),className:"rounded-full border border-red-100 bg-red-50 p-2 text-red-500 shadow-sm transition hover:bg-red-100",children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx("button",{title:"ÄÄƒng kÃ½ khuÃ´n máº·t",onClick:()=>C(n),className:"rounded-full border border-emerald-100 bg-emerald-50 p-2 text-emerald-600 shadow-sm transition hover:bg-emerald-100",children:e.jsx(Oe,{className:"h-4 w-4"})})]})})]},n.id))]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-slate-100 bg-white px-6 py-4 text-sm text-slate-500",children:[e.jsxs("p",{children:["Hiá»ƒn thá»‹ ",u===0?0:S,"-",b," trong"," ",u," nhÃ¢n viÃªn"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:bg-slate-50 disabled:opacity-40",disabled:s===1,onClick:()=>h(Math.max(1,s-1)),children:"â†"}),d.map((n,y)=>typeof n=="number"?e.jsx("button",{onClick:()=>h(n),className:`rounded-full px-3 py-1 ${n===s?"bg-blue-600 text-white shadow-md":"border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:n},n):e.jsx("span",{className:"px-2",children:"..."},`${n}-${y}`)),e.jsx("button",{className:"rounded-full border border-slate-200 px-3 py-1 text-slate-600 transition hover:bg-slate-50 disabled:opacity-40",disabled:s===i,onClick:()=>h(Math.min(i,s+1)),children:"â†’"})]})]})]})}const Fe=[{id:"dept-1",tenPhong:"PhÃ²ng Kinh Doanh",maPhong:"PKD",visible:!0},{id:"dept-2",tenPhong:"PhÃ²ng NhÃ¢n Sá»±",maPhong:"PNS",visible:!0},{id:"dept-3",tenPhong:"PhÃ²ng Káº¿ ToÃ¡n",maPhong:"PKT",visible:!0}],Re=[{id:"pos-1",tenChucVu:"NhÃ¢n viÃªn",maChucVu:"N",visible:!0},{id:"pos-2",tenChucVu:"TrÆ°á»Ÿng phÃ²ng",maChucVu:"T",visible:!0},{id:"pos-3",tenChucVu:"GiÃ¡m Ä‘á»‘c",maChucVu:"G",visible:!0}],ie=(g,u)=>{try{const s=localStorage.getItem(g);if(!s)return u;const a=JSON.parse(s);return Array.isArray(a)?a:u}catch(s){return console.warn(`KhÃ´ng Ä‘á»c Ä‘Æ°á»£c dá»¯ liá»‡u ${g}:`,s),u}};function qe({open:g,onClose:u,onSave:s,nextJoinOrder:a}){const i=()=>({name:"",code:"",dept:"",departmentId:null,position:"",positionId:null,baseSalary:0,status:"active",photo:"",taiKhoan:"",matKhau:"",joinedAt:new Date().toISOString().slice(0,10)}),[o,x]=l.useState(i),[C,j]=l.useState(null),[c,p]=l.useState([]),[h,w]=l.useState([]);l.useEffect(()=>{if(!g)return;x(i()),j(null);const d=ie("departmentsData",Fe),m=ie("positionsData",Re);p(d.filter(n=>n.visible??!0)),w(m.filter(n=>n.visible??!0))},[g]),l.useEffect(()=>{c.length>0&&!o.dept&&x(d=>({...d,dept:c[0].tenPhong,departmentId:c[0].id}))},[c,o.dept]),l.useEffect(()=>{h.length>0&&!o.position&&x(d=>({...d,position:h[0].tenChucVu,positionId:h[0].id}))},[h,o.position]),l.useEffect(()=>{if(!o.dept||!o.position||!a)return;const d=G({deptName:o.dept,positionName:o.position,joinOrder:a,departments:c,positions:h});x(m=>m.code===d?m:{...m,code:d})},[o.dept,o.position,a,c,h]);const S=d=>{const{name:m,value:n}=d.target;x(y=>{if(m==="dept"){const v=c.find(f=>f.tenPhong===n);return{...y,dept:n,departmentId:v?.id??null}}if(m==="position"){const v=h.find(f=>f.tenChucVu===n);return{...y,position:n,positionId:v?.id??null}}return m==="baseSalary"?{...y,baseSalary:parseFloat(n)||0}:{...y,[m]:n}})},b=d=>{const m=d.target.files?.[0];if(!m)return;const n=new FileReader;n.onload=()=>{const y=n.result;x(v=>({...v,photo:y})),j(y)},n.readAsDataURL(m)},k=d=>{if(d.preventDefault(),!o.name){alert("Vui lÃ²ng nháº­p há» tÃªn.");return}if(!o.taiKhoan||!o.matKhau){alert("Vui lÃ²ng nháº­p tÃ i khoáº£n vÃ  máº­t kháº©u cháº¥m cÃ´ng.");return}s(o)};return e.jsx(U,{open:g,onClose:u,title:"ThÃªm nhÃ¢n viÃªn",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-500 mb-3",children:"ThÃ´ng tin cÆ¡ báº£n"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"MÃ£ nhÃ¢n viÃªn"}),e.jsx(A,{name:"code",value:o.code,readOnly:!0,className:"bg-slate-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Há» vÃ  tÃªn Ä‘áº§y Ä‘á»§"}),e.jsx(A,{name:"name",value:o.name,onChange:S,placeholder:"VD: Nguyá»…n Minh Anh",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-500 mb-3",children:"ThÃ´ng tin cÃ´ng viá»‡c"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"PhÃ²ng ban"}),e.jsx(L,{name:"dept",value:o.dept,onChange:S,required:!0,children:c.length===0?e.jsx("option",{value:"",children:"ChÆ°a cÃ³ phÃ²ng ban nÃ o. Vui lÃ²ng táº¡o trÆ°á»›c á»Ÿ trang PhÃ²ng ban."}):c.map(d=>e.jsx("option",{value:d.tenPhong,children:d.tenPhong},d.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Chá»©c vá»¥"}),e.jsx(L,{name:"position",value:o.position,onChange:S,required:!0,children:h.length===0?e.jsx("option",{value:"",children:"ChÆ°a cÃ³ chá»©c vá»¥ nÃ o. Vui lÃ²ng táº¡o trÆ°á»›c á»Ÿ trang Chá»©c vá»¥."}):h.map(d=>e.jsx("option",{value:d.tenChucVu,children:d.tenChucVu},d.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"LÆ°Æ¡ng cÆ¡ báº£n (VNÄ)"}),e.jsx(A,{name:"baseSalary",type:"number",value:o.baseSalary,onChange:S,placeholder:"VD: 15000000",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"NgÃ y vÃ o cÃ´ng ty"}),e.jsx(A,{name:"joinedAt",type:"date",value:o.joinedAt,onChange:S,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Tráº¡ng thÃ¡i"}),e.jsxs(L,{name:"status",value:o.status,onChange:S,children:[e.jsx("option",{value:"active",children:"Hoáº¡t Ä‘á»™ng"}),e.jsx("option",{value:"inactive",children:"NgÆ°ng"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-500 mb-3",children:"TÃ i khoáº£n nhÃ¢n viÃªn"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-600 mb-2",children:"TÃ i khoáº£n Ä‘Äƒng nháº­p"}),e.jsx(A,{name:"taiKhoan",value:o.taiKhoan,onChange:S,placeholder:"VD: minh.anh",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-slate-600 mb-2",children:"Máº­t kháº©u"}),e.jsx(A,{name:"matKhau",type:"password",value:o.matKhau,onChange:S,placeholder:"Ãt nháº¥t 6 kÃ½ tá»±",required:!0})]})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-blue-500 mb-3",children:"áº¢nh nháº­n diá»‡n"}),e.jsx("label",{className:"block text-sm font-semibold text-slate-900 mb-2",children:"Chá»n áº£nh nhÃ¢n viÃªn"}),e.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"block w-full text-sm text-gray-700 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-600 hover:file:bg-blue-100"}),e.jsx("div",{className:"mt-3",children:C?e.jsx("img",{src:C,alt:"Xem trÆ°á»›c",className:"w-24 h-24 rounded-xl object-cover border border-gray-200 shadow-sm"}):e.jsx("p",{className:"text-xs text-gray-500"})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(O,{variant:"ghost",type:"button",onClick:u,children:"Huá»·"}),e.jsx(O,{type:"submit",children:"LÆ°u"})]})]})})}const $e=[{id:"dept-1",tenPhong:"PhÃ²ng Kinh Doanh",maPhong:"PKD",visible:!0},{id:"dept-2",tenPhong:"PhÃ²ng NhÃ¢n Sá»±",maPhong:"PNS",visible:!0},{id:"dept-3",tenPhong:"PhÃ²ng Káº¿ ToÃ¡n",maPhong:"PKT",visible:!0}],Je=[{id:"pos-1",tenChucVu:"NhÃ¢n viÃªn",maChucVu:"N",visible:!0},{id:"pos-2",tenChucVu:"TrÆ°á»Ÿng phÃ²ng",maChucVu:"T",visible:!0},{id:"pos-3",tenChucVu:"GiÃ¡m Ä‘á»‘c",maChucVu:"G",visible:!0}],re=(g,u)=>{try{const s=localStorage.getItem(g);if(!s)return u;const a=JSON.parse(s);return Array.isArray(a)?a:u}catch(s){return console.warn(`KhÃ´ng Ä‘á»c Ä‘Æ°á»£c dá»¯ liá»‡u ${g}:`,s),u}};function _e({open:g,onClose:u,onSave:s,employee:a}){const[i,o]=l.useState({code:"",name:"",dept:"",departmentId:null,position:"",positionId:null,photo:null,baseSalary:0,status:"active",taiKhoan:"",matKhau:"",joinedAt:new Date().toISOString().slice(0,10)}),[x,C]=l.useState([]),[j,c]=l.useState([]),[p,h]=l.useState(1);l.useEffect(()=>{if(a){o({name:a.name,dept:a.dept,position:a.position,departmentId:a.departmentId??null,positionId:a.positionId??null,photo:a.photo??null,baseSalary:a.baseSalary,code:a.code,status:a.status,taiKhoan:a.taiKhoan,matKhau:a.matKhau,joinedAt:a.joinedAt?.slice(0,10)??new Date().toISOString().slice(0,10)});const b=a.joinOrder??we(a.code)??1;h(b)}},[a]),l.useEffect(()=>{if(!g)return;const b=re("departmentsData",$e),k=re("positionsData",Je),d=b.filter(n=>n.visible??!0),m=k.filter(n=>n.visible??!0);if(a){if(!d.some(v=>v.tenPhong===a.dept)){const v=b.find(f=>f.tenPhong===a.dept);v&&d.push(v)}if(!m.some(v=>v.tenChucVu===a.position)){const v=k.find(f=>f.tenChucVu===a.position);v&&m.push(v)}}C(d),c(m)},[g,a]),l.useEffect(()=>{if(!a||!i.dept||!i.position)return;const b=G({deptName:i.dept,positionName:i.position,joinOrder:p,departments:x,positions:j});o(k=>k.code===b?k:{...k,code:b})},[i.dept,i.position,p,x,j,a]);const w=b=>{const{name:k,value:d}=b.target;o(m=>{if(k==="dept"){const n=x.find(y=>y.tenPhong===d);return{...m,dept:d,departmentId:n?.id??null}}if(k==="position"){const n=j.find(y=>y.tenChucVu===d);return{...m,position:d,positionId:n?.id??null}}return k==="baseSalary"?{...m,baseSalary:parseFloat(d)||0}:{...m,[k]:d}})},S=b=>{if(b.preventDefault(),!i.name)return alert("TÃªn khÃ´ng Ä‘Æ°á»£c Ä‘á»ƒ trá»‘ng");if(!i.taiKhoan||!i.matKhau)return alert("Cáº§n nháº­p tÃ i khoáº£n vÃ  máº­t kháº©u.");s(i)};return a?e.jsx(U,{open:g,onClose:u,title:"Chá»‰nh sá»­a nhÃ¢n viÃªn",titleClassName:"text-black",children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"MÃ£ nhÃ¢n viÃªn"}),e.jsx(A,{name:"code",value:i.code,readOnly:!0,className:"bg-slate-50",placeholder:"MÃ£ tá»± Ä‘á»™ng"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Há» tÃªn"}),e.jsx(A,{name:"name",value:i.name,onChange:w,required:!0,placeholder:"Nháº­p há» tÃªn"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"PhÃ²ng ban"}),e.jsx(L,{name:"dept",value:i.dept,onChange:w,required:!0,children:x.length===0?e.jsx("option",{value:"",children:"ChÆ°a cÃ³ phÃ²ng ban kháº£ dá»¥ng"}):x.map(b=>e.jsx("option",{value:b.tenPhong,children:b.tenPhong},b.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Chá»©c vá»¥"}),e.jsx(L,{name:"position",value:i.position,onChange:w,required:!0,children:j.length===0?e.jsx("option",{value:"",children:"ChÆ°a cÃ³ chá»©c vá»¥ kháº£ dá»¥ng"}):j.map(b=>e.jsx("option",{value:b.tenChucVu,children:b.tenChucVu},b.id))})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"LÆ°Æ¡ng cÆ¡ báº£n"}),e.jsx(A,{name:"baseSalary",type:"number",value:i.baseSalary,onChange:w,required:!0,placeholder:"VD: 15000000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"NgÃ y vÃ o cÃ´ng ty"}),e.jsx(A,{name:"joinedAt",type:"date",value:i.joinedAt,onChange:w,required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"TÃ i khoáº£n Ä‘Äƒng nháº­p"}),e.jsx(A,{name:"taiKhoan",value:i.taiKhoan,onChange:w,required:!0,placeholder:"VD: dao.nhat"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-black mb-2",children:"Máº­t kháº©u"}),e.jsx(A,{name:"matKhau",type:"password",value:i.matKhau,onChange:w,required:!0,placeholder:"Ãt nháº¥t 6 kÃ½ tá»±"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tráº¡ng thÃ¡i"}),e.jsxs(L,{name:"status",value:i.status,onChange:w,children:[e.jsx("option",{value:"active",children:"Hoáº¡t Ä‘á»™ng"}),e.jsx("option",{value:"inactive",children:"NgÆ°ng"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(O,{variant:"ghost",type:"button",onClick:u,children:"Huá»·"}),e.jsx(O,{type:"submit",children:"LÆ°u thay Ä‘á»•i"})]})]})}):null}function ze({q:g,onQueryChange:u,dept:s,onDeptChange:a,status:i,onStatusChange:o}){return e.jsxs("div",{className:"grid gap-4 md:grid-cols-[minmax(0,2.2fr)_minmax(0,1fr)_minmax(0,1fr)]",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"pointer-events-none absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",children:"ðŸ”"}),e.jsx(A,{placeholder:"TÃ¬m theo tÃªn, mÃ£ nhÃ¢n viÃªn...",value:g,onChange:x=>u(x.target.value),className:"rounded-2xl border-slate-200 bg-slate-50 pl-12 py-3 text-sm"})]}),e.jsx("div",{children:e.jsxs(L,{value:s,onChange:x=>a(x.target.value),className:"rounded-2xl border-slate-200 bg-white py-3 text-sm text-slate-600",children:[e.jsx("option",{value:"all",children:"Táº¥t cáº£ phÃ²ng ban"}),e.jsx("option",{value:"PhÃ²ng Kinh Doanh",children:"PhÃ²ng Kinh Doanh"}),e.jsx("option",{value:"TrÆ°á»Ÿng phÃ²ng",children:"Ban GiÃ¡m Äá»‘c"}),e.jsx("option",{value:"ChÄƒm sÃ³c KH",children:"ChÄƒm sÃ³c KH"})]})}),e.jsx("div",{children:e.jsxs(L,{value:i,onChange:x=>o(x.target.value),className:"rounded-2xl border-slate-200 bg-white py-3 text-sm text-slate-600",children:[e.jsx("option",{value:"all",children:"Táº¥t cáº£ chá»©c vá»¥"}),e.jsx("option",{value:"active",children:"Hoáº¡t Ä‘á»™ng"}),e.jsx("option",{value:"inactive",children:"NgÆ°ng"})]})})]})}function Be({open:g,onClose:u,employee:s}){if(!s)return null;const[a,i]=l.useState({history:[],monthlyHours:0,loading:!1});l.useEffect(()=>{if(!g||!s)return;let p=!0;return i(h=>({...h,loading:!0})),(async()=>{try{const h=await le.fetchAttendanceHistory(s.id,50),w=h.length?h:ne(s.id),S=ae(w);p&&i({history:S.history,monthlyHours:S.monthlyHours,loading:!1})}catch(h){if(console.warn("KhÃ´ng táº£i Ä‘Æ°á»£c lá»‹ch sá»­ cháº¥m cÃ´ng cá»§a nhÃ¢n viÃªn.",h),p){const w=ae(ne(s.id));i({history:w.history,monthlyHours:w.monthlyHours,loading:!1})}}})(),()=>{p=!1}},[s,g]);const o=p=>Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(p),x=p=>{if(!p)return"â€”";const h=new Date(p);return Number.isNaN(h.getTime())?"â€”":new Intl.DateTimeFormat("vi-VN").format(h)},C=s.name.split(" ").map(p=>p[0]).join("").slice(0,2).toUpperCase(),j=Ve(a.monthlyHours,s.baseSalary),c=a.history.slice(0,5);return e.jsx(U,{open:g,onClose:u,title:"ThÃ´ng tin nhÃ¢n viÃªn",children:e.jsxs("div",{className:"space-y-5 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4 rounded-2xl border border-gray-100 bg-gradient-to-r from-blue-50 to-white p-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl overflow-hidden bg-white shadow-inner flex items-center justify-center text-lg font-semibold text-blue-600",children:s.photo?e.jsx("img",{src:s.photo,alt:s.name,className:"w-full h-full object-cover"}):C}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-wide text-blue-500",children:"NhÃ¢n viÃªn"}),e.jsx("p",{className:"text-xl font-semibold text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.position})]}),e.jsx("span",{className:`ml-auto rounded-full px-3 py-1 text-xs font-semibold ${s.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.status==="active"?"Hoáº¡t Ä‘á»™ng":"NgÆ°ng"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3 rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"MÃ£ nhÃ¢n viÃªn"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.code})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"PhÃ²ng ban"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.dept})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Chá»©c vá»¥"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.position})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"LÆ°Æ¡ng cÆ¡ báº£n"}),e.jsx("span",{className:"font-semibold text-gray-900",children:o(s.baseSalary)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"NgÃ y vÃ o cÃ´ng ty"}),e.jsx("span",{className:"font-medium text-gray-900",children:x(s.joinedAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"TÃ i khoáº£n"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.taiKhoan||"ChÆ°a thiáº¿t láº­p"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Máº­t kháº©u"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.matKhau||"ChÆ°a thiáº¿t láº­p"})]})]}),e.jsxs("div",{className:"space-y-4 rounded-xl border border-gray-100 bg-white p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:"Cháº¥m cÃ´ng & lÆ°Æ¡ng thÃ¡ng nÃ y"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Tá»•ng sá»‘ giá» Ä‘Ã£ lÃ m"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:[a.monthlyHours.toFixed(2),"h"]})]}),e.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"LÆ°Æ¡ng dá»± kiáº¿n"}),e.jsxs("p",{className:"text-2xl font-bold text-emerald-600 mt-1",children:[j.projectedSalary.toLocaleString("vi-VN"),"â‚«"]}),e.jsx("p",{className:"text-[11px] text-slate-500 mt-1",children:j.hasBaseSalary?j.overtimeHours>0?`Gá»“m ${j.overtimeHours.toFixed(2)}h lÃ m thÃªm (+${j.overtimePay.toLocaleString("vi-VN")}â‚«)`:"ÄÃ£ Ä‘á»§ 40 giá», hiá»ƒn thá»‹ lÆ°Æ¡ng cÆ¡ báº£n":"ChÆ°a Ä‘á»§ 40 giá» Ä‘á»ƒ nháº­n lÆ°Æ¡ng cÆ¡ báº£n"})]}),e.jsxs("div",{className:"rounded-xl bg-slate-50 p-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Sá»‘ láº§n cháº¥m cÃ´ng"}),e.jsx("p",{className:"text-2xl font-bold text-slate-900 mt-1",children:a.history.length})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Lá»‹ch sá»­ gáº§n Ä‘Ã¢y"}),a.loading?e.jsx("p",{className:"text-sm text-slate-500",children:"Äang táº£i dá»¯ liá»‡u..."}):c.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"ChÆ°a cÃ³ dá»¯ liá»‡u cháº¥m cÃ´ng."}):e.jsx("ul",{className:"space-y-2",children:c.map(p=>{const h=new Date(p.timestamp);return e.jsxs("li",{className:"flex items-center justify-between rounded-xl bg-slate-50 px-3 py-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-slate-900",children:p.type==="checkin"?"Check-in":"Check-out"}),e.jsxs("p",{className:"text-xs text-slate-500",children:[h.toLocaleDateString("vi-VN")," â€¢ ",h.toLocaleTimeString("vi-VN")]})]}),typeof p.durationHours=="number"&&p.durationHours>0&&e.jsxs("span",{className:"text-xs font-semibold text-emerald-600",children:["+",p.durationHours.toFixed(2),"h"]})]},p.id)})})]})]})]})})}function Ue({open:g,onClose:u,employee:s,onSaved:a}){const i=l.useRef(null),o=l.useRef(null),[x,C]=l.useState(null),[j,c]=l.useState(null),[p,h]=l.useState(!1),[w,S]=l.useState(null),[b,k]=l.useState(!1),[d,m]=l.useState(!1);l.useEffect(()=>{if(!g)return;let f=!0;return(async()=>{try{const E=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});if(!f){E.getTracks().forEach(R=>R.stop());return}o.current=E,i.current&&(i.current.srcObject=E,await i.current.play()),h(!0),c(null)}catch(E){const R=E instanceof Error?E.message:"KhÃ´ng thá»ƒ truy cáº­p camera trÃªn thiáº¿t bá»‹ nÃ y.";c(R),h(!1)}})(),()=>{f=!1,o.current?.getTracks().forEach(E=>E.stop()),o.current=null,C(null),c(null),h(!1),S(null),k(!1),m(!1)}},[g]);const n=async()=>{if(i.current){k(!0);try{const f=await Ee(i.current);if(!f.descriptor){C(null),S(null),c("KhÃ´ng tÃ¬m tháº¥y khuÃ´n máº·t. Vui lÃ²ng thá»­ láº¡i vá»›i Ã¡nh sÃ¡ng tá»‘t hÆ¡n.");return}C(f.dataUrl),S(f.descriptor),c(null)}catch(f){const H=f instanceof Error?f.message:"KhÃ´ng thá»ƒ nháº­n diá»‡n khuÃ´n máº·t. Vui lÃ²ng thá»­ láº¡i.";c(H),C(null),S(null)}finally{k(!1)}}},y=()=>{C(null),S(null),c(null)},v=async()=>{if(!w||!s){c("Vui lÃ²ng chá»¥p khuÃ´n máº·t trÆ°á»›c khi lÆ°u.");return}m(!0);try{await le.enrollFace({employeeId:s.id,embedding:Te(w),snapshot:x??void 0}),a?.()}catch(f){const H=f instanceof Error?f.message:"KhÃ´ng thá»ƒ lÆ°u khuÃ´n máº·t. Vui lÃ²ng thá»­ láº¡i.";c(H)}finally{m(!1)}};return s?e.jsx(U,{open:g,onClose:u,title:"ÄÄƒng kÃ½ khuÃ´n máº·t",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Vui lÃ²ng nhÃ¬n tháº³ng vÃ o camera, giá»¯ á»•n Ä‘á»‹nh khuÃ´n máº·t trong khung vÃ  nháº¥n â€œChá»¥pâ€."}),e.jsx("div",{className:"relative rounded-2xl bg-black/80 overflow-hidden aspect-video",children:x?e.jsx("img",{src:x,alt:"áº¢nh khuÃ´n máº·t",className:"w-full h-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx("video",{ref:i,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,playsInline:!0}),!p&&e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-white bg-black/50 text-sm",children:j??"Äang khá»Ÿi Ä‘á»™ng camera..."})]})}),e.jsx("div",{className:"flex flex-wrap gap-3 justify-end",children:x?e.jsxs(e.Fragment,{children:[e.jsx(O,{variant:"ghost",type:"button",onClick:y,children:"Chá»¥p láº¡i"}),e.jsx(O,{type:"button",onClick:v,disabled:d,children:d?"Äang lÆ°u...":"LÆ°u khuÃ´n máº·t"})]}):e.jsx(O,{type:"button",onClick:n,disabled:!p||!!j||b,children:b?"Äang xá»­ lÃ½...":"Chá»¥p"})}),j&&e.jsxs("p",{className:"text-sm text-red-600",children:[j," Vui lÃ²ng kiá»ƒm tra quyá»n camera vÃ  thá»­ láº¡i."]})]})}):null}const Ge=g=>{if(typeof window>"u")return[];const u=`attendanceHistory:${g}`,s=localStorage.getItem(u);if(!s)return[];try{const a=JSON.parse(s);if(Array.isArray(a))return a}catch(a){console.warn("KhÃ´ng Ä‘á»c Ä‘Æ°á»£c attendanceHistory:",a)}return[]},Qe=g=>{if(typeof window>"u")return 0;const u=localStorage.getItem(`workingHours:${g}`);if(!u)return 0;try{const s=JSON.parse(u),a=new Date;if(s&&s.year===a.getFullYear()&&s.month===a.getMonth()+1&&typeof s.hours=="number")return Number(s.hours)||0}catch(s){console.warn("KhÃ´ng Ä‘á»c Ä‘Æ°á»£c dá»¯ liá»‡u workingHours:",s)}return 0};function Ye({open:g,onClose:u,employee:s}){const[a,i]=l.useState([]);l.useEffect(()=>{if(!g||!s)return;const c=Ge(s.id);i(c)},[g,s]);const o=l.useMemo(()=>s?Qe(s.id):0,[s]),x=l.useMemo(()=>{if(!a.length)return 0;const c=new Date;return a.filter(p=>{const h=new Date(p.timestamp);return h.getFullYear()===c.getFullYear()&&h.getMonth()===c.getMonth()}).length},[a]);if(!s)return null;const C=new Intl.DateTimeFormat("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}),j=[...a].sort((c,p)=>new Date(p.timestamp).getTime()-new Date(c.timestamp).getTime());return e.jsx(U,{open:g,onClose:u,title:`Lá»‹ch sá»­ cháº¥m cÃ´ng - ${s.name}`,titleClassName:"text-slate-900",children:e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"rounded-2xl bg-slate-50 p-4",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:"Tá»•ng giá» thÃ¡ng nÃ y"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-slate-900",children:[o.toFixed(2),"h"]}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Sá»‘ láº§n cháº¥m cÃ´ng trong thÃ¡ng: ",x]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700 mb-3",children:"Lá»‹ch sá»­ gáº§n Ä‘Ã¢y"}),j.length===0?e.jsx("p",{className:"text-sm text-slate-500",children:"ChÆ°a cÃ³ dá»¯ liá»‡u cháº¥m cÃ´ng."}):e.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:j.map(c=>e.jsxs("li",{className:"flex items-center justify-between rounded-xl border border-slate-100 bg-white px-4 py-2 shadow-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-slate-900",children:c.type==="checkin"?"Check-in":"Check-out"}),e.jsx("p",{className:"text-xs text-slate-500",children:C.format(new Date(c.timestamp))})]}),typeof c.durationHours=="number"&&e.jsxs("span",{className:"text-sm font-semibold text-emerald-600",children:["+",c.durationHours.toFixed(2),"h"]})]},c.id))})]})]})})}function nt(){const g=Se(),u=4,s=t=>new Date(t).toISOString(),a=[{id:"1",code:"PKDN0001",name:"Nguyá»…n Minh Anh",dept:"PhÃ²ng Kinh Doanh",departmentId:"dept-1",position:"NhÃ¢n viÃªn",positionId:"pos-1",baseSalary:1e7,status:"active",visible:!0,photo:"https://i.pravatar.cc/150?img=3",joinOrder:1,joinedAt:s("2023-01-10"),taiKhoan:"minhanh",matKhau:"123456",account:"minhanh",password:"123456",createdAt:s("2023-01-10"),updatedAt:s("2023-01-10")},{id:"2",code:"PTPT0002",name:"Nguyá»…n Minh Táº¡o",dept:"TrÆ°á»Ÿng phÃ²ng",departmentId:"dept-2",position:"TrÆ°á»Ÿng phÃ²ng",positionId:"pos-2",baseSalary:2e7,status:"active",visible:!0,photo:"https://i.pravatar.cc/150?img=15",joinOrder:2,joinedAt:s("2023-03-05"),taiKhoan:"taonguyen",matKhau:"123456",account:"taonguyen",password:"123456",createdAt:s("2023-03-05"),updatedAt:s("2023-03-05")},{id:"3",code:"PCKN0003",name:"Tráº§n Quá»³nh",dept:"ChÄƒm sÃ³c KH",departmentId:"dept-3",position:"NhÃ¢n viÃªn",positionId:"pos-1",baseSalary:12e6,status:"inactive",visible:!0,photo:"https://i.pravatar.cc/150?img=32",joinOrder:3,joinedAt:s("2023-06-18"),taiKhoan:"quynhtran",matKhau:"123456",account:"quynhtran",password:"123456",createdAt:s("2023-06-18"),updatedAt:s("2023-06-18")}],i=t=>{const P=X(),N=Z();return ke(t.map(r=>({...r,code:r.code??""}))).map((r,I)=>{const T=new Date().toISOString(),K=P.find(Y=>Y.tenPhong===r.dept),J=N.find(Y=>Y.tenChucVu===r.position),D=typeof r.joinedAt=="string"?r.joinedAt:typeof r.createdAt=="string"?r.createdAt:T,M=new Date(D),B=Number.isNaN(M.getTime())?T:M.toISOString(),_=typeof r.createdAt=="string"&&!Number.isNaN(new Date(r.createdAt).getTime())?new Date(r.createdAt).toISOString():B,ve=typeof r.updatedAt=="string"&&!Number.isNaN(new Date(r.updatedAt).getTime())?new Date(r.updatedAt).toISOString():_,Ne=Number(r.salary)||0,ye=typeof r.baseSalary=="number"?r.baseSalary:Ne,ee=r.taiKhoan??r.account??"",te=r.matKhau??r.password??"";return{id:r.id??`legacy-${I}`,code:r.code??"",name:r.name??"",dept:r.dept??K?.tenPhong??"",departmentId:r.departmentId??K?.id??null,position:r.position??J?.tenChucVu??"",positionId:r.positionId??J?.id??null,baseSalary:ye,status:r.status??"active",visible:typeof r.visible=="boolean"?r.visible:!0,photo:r.photo,joinOrder:r.joinOrder,joinedAt:B,taiKhoan:ee,matKhau:te,account:ee,password:te,createdAt:_,updatedAt:ve}})},[o,x]=l.useState(()=>{const t=localStorage.getItem("employeesData");if(t)try{const N=JSON.parse(t);return i(N)}catch(N){console.warn("KhÃ´ng Ä‘á»c Ä‘Æ°á»£c employeesData:",N)}const P=i(a);return localStorage.setItem("employeesData",JSON.stringify(P)),P}),[C,j]=l.useState(""),[c,p]=l.useState("all"),[h,w]=l.useState("all"),[S,b]=l.useState(!1),[k,d]=l.useState([]),[m,n]=l.useState(null),[y,v]=l.useState(null),[f,H]=l.useState(null),[E,R]=l.useState(null),[Q,z]=l.useState(1);l.useEffect(()=>{Ae.list(),He.list()},[]),l.useEffect(()=>{let t=!0;return(async()=>{try{const N=await F.list();t&&N.length&&x(i(N))}catch(N){console.warn("KhÃ´ng thá»ƒ Ä‘á»“ng bá»™ danh sÃ¡ch nhÃ¢n viÃªn tá»« backend.",N)}})(),()=>{t=!1}},[]);const q=l.useMemo(()=>o.filter(t=>!(c!=="all"&&t.dept!==c||h!=="all"&&t.status!==h||C&&!t.name.toLowerCase().includes(C.toLowerCase()))),[o,C,c,h]);l.useEffect(()=>{const t=Math.max(1,Math.ceil(q.length/u));z(P=>Math.min(P,t))},[q.length]);const oe=l.useMemo(()=>{const t=(Q-1)*u;return q.slice(t,t+u)},[q,Q]),ce=t=>{z(1),j(t)},de=t=>{z(1),p(t)},he=t=>{z(1),w(t)},W=l.useMemo(()=>Ce(o),[o]),ue=async t=>{try{const D=await F.create(t);if(D){x(M=>[D,...M]),$("ÄÃ£ thÃªm nhÃ¢n viÃªn"),b(!1);return}}catch(D){console.warn("KhÃ´ng thá»ƒ thÃªm nhÃ¢n viÃªn trÃªn backend, dÃ¹ng cháº¿ Ä‘á»™ offline.",D)}const P=X(),N=Z(),V=W,r=G({deptName:t.dept,positionName:t.position,joinOrder:V,departments:P,positions:N}),I=new Date().toISOString(),T=t.departmentId??P.find(D=>D.tenPhong===t.dept)?.id??null,K=t.positionId??N.find(D=>D.tenChucVu===t.position)?.id??null,J={...t,id:se(),code:r,departmentId:T,positionId:K,baseSalary:t.baseSalary,joinOrder:V,joinedAt:new Date(t.joinedAt).toISOString(),visible:!0,account:t.taiKhoan,password:t.matKhau,createdAt:I,updatedAt:I};x(D=>{const M=[J,...D];return F.saveLocalSnapshot(M),M}),$("ÄÃ£ thÃªm nhÃ¢n viÃªn (chá»‰ lÆ°u cá»¥c bá»™)"),b(!1)},me=async t=>{if(!m)return;try{const I=await F.update(m.id,t);if(I){x(T=>T.map(K=>K.id===I.id?I:K)),$("ÄÃ£ cáº­p nháº­t nhÃ¢n viÃªn"),n(null);return}}catch(I){console.warn("KhÃ´ng thá»ƒ cáº­p nháº­t nhÃ¢n viÃªn trÃªn backend, dÃ¹ng dá»¯ liá»‡u offline.",I)}const P=X(),N=Z(),V=m.joinOrder??o.find(I=>I.id===m.id)?.joinOrder??1,r=t.dept!==m.dept||t.position!==m.position;x(I=>{const T=I.map(K=>{if(K.id!==m.id)return K;const J=r?G({deptName:t.dept,positionName:t.position,joinOrder:V,departments:P,positions:N}):K.code,D=t.departmentId??P.find(_=>_.tenPhong===t.dept)?.id??K.departmentId??null,M=t.positionId??N.find(_=>_.tenChucVu===t.position)?.id??K.positionId??null,B=t.matKhau||K.matKhau;return{...K,code:J,name:t.name,dept:t.dept,departmentId:D,position:t.position,positionId:M,baseSalary:t.baseSalary,status:t.status,taiKhoan:t.taiKhoan,matKhau:B,account:t.taiKhoan,password:B,photo:t.photo??K.photo,joinedAt:new Date(t.joinedAt).toISOString(),joinOrder:V,updatedAt:new Date().toISOString()}});return F.saveLocalSnapshot(T),T}),$("ÄÃ£ cáº­p nháº­t nhÃ¢n viÃªn (chá»‰ lÆ°u cá»¥c bá»™)"),n(null)},xe=async t=>{if(!window.confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n xoÃ¡ nhÃ¢n viÃªn nÃ y?"))return;x(V=>{const r=V.filter(I=>I.id!==t);return F.saveLocalSnapshot(r),r});const N=await F.remove(t);$(N?"ÄÃ£ xÃ³a nhÃ¢n viÃªn":"ÄÃ£ xÃ³a nhÃ¢n viÃªn (chá»‰ trÃªn thiáº¿t bá»‹ nÃ y)")},$=t=>{const P=se();d(N=>[...N,{id:P,message:t}]),setTimeout(()=>{d(N=>N.filter(V=>V.id!==P))},3e3)},ge=t=>{n(t)},pe=t=>{H(t)},be=t=>{v(t)},fe=t=>{R(t)},je=t=>{const P=localStorage.getItem(`workingHours:${t.id}`);let N="0";if(P)try{const r=JSON.parse(P),I=new Date,T=I.getMonth()+1,K=I.getFullYear();r&&r.year===K&&r.month===T&&typeof r.hours=="number"&&(N=String(r.hours))}catch(r){console.warn("KhÃ´ng Ä‘á»c Ä‘Æ°á»£c dá»¯ liá»‡u workingHours:",r)}const V=new URLSearchParams({employeeId:t.id,code:t.code,name:t.name,dept:t.dept,position:t.position,salary:String(t.baseSalary),hours:N});g(`/admin/payroll?${V.toString()}`)};return e.jsx("div",{className:"min-h-screen bg-white p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm font-medium cursor-pointer w-max hover:text-slate-700 transition",onClick:()=>g("/"),children:[e.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-white shadow-sm border border-slate-200",children:"â†"}),"Quay láº¡i"]}),e.jsxs("div",{className:"rounded-[32px] bg-white/90 p-8 shadow-[0_25px_60px_rgba(15,23,42,0.08)] border border-slate-100",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-blue-500 uppercase tracking-wide",children:"Quáº£n trá»‹ nhÃ¢n sá»±"}),e.jsx("h1",{className:"mt-2 text-4xl font-bold text-slate-900",children:"NhÃ¢n viÃªn"}),e.jsx("p",{className:"mt-1 text-base text-slate-500",children:"Quáº£n lÃ½ danh sÃ¡ch vÃ  thÃ´ng tin nhÃ¢n sá»±"})]}),e.jsx("div",{className:"flex flex-col items-end gap-4",children:e.jsx(O,{className:"rounded-full px-5 py-2 text-base shadow-lg shadow-blue-200",onClick:()=>b(!0),children:"+ ThÃªm nhÃ¢n viÃªn"})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(ze,{q:C,onQueryChange:ce,dept:c,onDeptChange:de,status:h,onStatusChange:he})}),e.jsx("div",{className:"mt-6",children:e.jsx(Le,{data:oe,totalCount:q.length,page:Q,pageSize:u,pageCount:Math.max(1,Math.ceil(q.length/u)),onPageChange:z,onDelete:t=>{xe(t)},onEdit:ge,onRegisterFace:pe,onViewPayroll:je,onViewDetail:be,onViewAttendance:fe})})]}),e.jsx("div",{className:"fixed bottom-4 right-4 space-y-2 z-50",children:k.map(t=>e.jsx("div",{className:"bg-gray-800 text-white py-2 px-4 rounded-lg shadow-lg animate-fade-in-out",children:t.message},t.id))}),e.jsx(qe,{open:S,onClose:()=>b(!1),onSave:t=>{ue(t)},nextJoinOrder:W}),e.jsx(_e,{open:!!m,onClose:()=>n(null),employee:m,onSave:t=>{me(t)}}),e.jsx(Be,{open:!!y,onClose:()=>v(null),employee:y}),e.jsx(Ue,{open:!!f,onClose:()=>H(null),employee:f,onSaved:()=>{$("ÄÃ£ lÆ°u khuÃ´n máº·t nhÃ¢n viÃªn"),H(null)}}),e.jsx(Ye,{open:!!E,onClose:()=>R(null),employee:E})]})})}export{nt as default};
